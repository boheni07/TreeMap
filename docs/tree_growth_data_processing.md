# 가로수 4대 생육 정보 처리 및 AI 보정 가이드

본 문서는 TreeMap 시스템에서 관리하는 수목의 4대 주요 생육 정보(수고, 수관폭, 지하고, 흉고직경)의 데이터 처리 흐름과 서버 AI를 통한 정밀 보정 체계에 대해 설명합니다.

## 1. 주요 생육 정보 정의

| 항목 | 영문명 (DB/UI) | 설명 | 측정 단위 |
| :--- | :--- | :--- | :--- |
| **수고** | Height | 가로수의 전체 높이 (지표면~수관 상단) | 미터 (m) |
| **수관폭** | Crown Width | 가로수 가지와 잎이 퍼진 가로 너비 | 미터 (m) |
| **지하고** | Ground Clearance | 지표면에서 첫 번째 주요 가지가 시작되는 높이 | 미터 (m) |
| **흉고직경** | DBH | 지상 1.2m 높이에서의 나무 줄기 직경 | 센티미터 (cm) |

## 2. 데이터 처리 흐름 (Raw to AI-Corrected)

시스템은 '하이브리드 보정 체계'를 사용하여 데이터의 정확도를 극대화합니다.

### Step 1: 스마트폰 RAW 측정 (현장)
스마트폰 센서(IMU, 초점거리)와 하드코딩된 알고리즘을 통해 1차 측정값을 산출합니다. 이 데이터는 DB의 기본 필드에 저장되며 **원본 데이터(Raw Data)**로서의 가치를 가집니다.

### Step 2: 서버 AI 정밀 분석 (자동)
데이터가 서버에 저장되는 즉시 AI 서비스가 트리거되어 고성능 모델(YOLO-seg 등)로 이미지를 재분석합니다.
- **보정 원리**: LiDAR 데이터가 없는 환경을 극복하기 위해, AI가 추출한 마스크와 단안 깊이 추정(Depth Estimation)을 결합하여 1차 측정값의 오차를 2-5% 내외로 보정합니다.

### Step 3: 데이터 분리 저장
| 데이터 성격 | 저장 필드명 (DB 예시) | UI 표시 |
| :--- | :--- | :--- |
| 현장 측정값 | `dbh`, `height`, `crown_width`, `ground_clearance` | **Smartphone (Gray)** |
| 서버 보정값 | `server_dbh`, `server_height`, `server_crown_width`, `server_ground_clearance` | **Server AI (Color)** |

## 3. 대시보드 통합 시각화

대시보드 상세 팝업에서는 위 4개 항목에 대해 **[스마트폰 측정값] → [서버 AI 보정값]** 형태의 비교 뷰를 제공합니다. 이를 통해 사용자는 AI가 데이터를 어떻게 정밀하게 수정했는지 직관적으로 확인할 수 있으며, 최종 데이터의 확신도(Confidence)와 함께 관리할 수 있습니다.

---

*본 문서는 수목 자산 관리의 정밀도를 높이기 위한 TreeMap의 데이터 처리 표준을 정의합니다.*
